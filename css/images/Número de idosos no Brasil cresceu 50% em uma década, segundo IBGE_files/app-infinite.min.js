/*! zaz-app-infinite - v1.0.0 - 06/06/2018 -- 8:22pm */
zaz.use(function(pkg){"use strict";pkg.factoryManager.get("dict").create({name:"newHistories",version:"1.0.0",state:"ok","extends":[],langs:{pt:{labelNewHistory:"NOVA <strong>HISTÓRIA</strong>",labelNewsHistories:"NOVAS <strong>HISTÓRIAS</strong>",advertising:"Publicidade"},es:{labelNewHistory:"NUEVA <strong>HISTORIA</strong>",labelNewsHistories:"NUEVAS <strong>HISTORIAS</strong>",advertising:"Publicidad"},en:{labelNewHistory:"NEW <strong>HISTORY</strong>",labelNewsHistories:"NEWS <strong>HISTORIES</strong>",advertising:"Advertising"}}})}),zaz.use(function regMetrics(pkg){"use strict";pkg.factoryManager.get("mod").create({name:"regMetrics",version:"1.0.0",state:"ok",docs:"http://github.tpn.terra.com/pages/terra/zaz-ui-portal-home",source:"http://github.tpn.terra.com/Terra/zaz-ui-portal-home",description:"Registra as metricas das mesas",dependencies:[],tests:"http://s1.trrsf.com/fe/zaz-ui-portal-home/tests/index.htm?zaz[env]=tests",setup:function(data){var MODULE={},PRIVATE={};return PRIVATE.templateType=pkg.context.publisher.get("template"),PRIVATE.objTerraMetricsBuffer={},pkg.context.page.at("register-metrics",function(data){data&&data.area&&data.sender&&"card-view"===data.type&&("app.topstories"===data.sender||"app.customCards"===data.sender||"app.specialContent"===data.sender||"app.relatedContent"===data.sender?data.area&&(PRIVATE.objTerraMetricsBuffer[data.area]&&PRIVATE.objTerraMetricsBuffer[data.area].isVisiable?(PRIVATE.objTerraMetricsBuffer[data.area]=null,data&&data.cards&&PRIVATE.regTerraMetrics(data)):PRIVATE.objTerraMetricsBuffer[data.area]={data:data,isVisiable:!1}):"app.infinite"===data.sender&&("TABLE-APP"===data.tableType&&(PRIVATE.objTerraMetricsBuffer[data.area]?(data=PRIVATE.objTerraMetricsBuffer[data.area].data,PRIVATE.objTerraMetricsBuffer[data.area]=null):PRIVATE.objTerraMetricsBuffer[data.area]={data:null,isVisiable:!0}),data&&data.cards&&PRIVATE.regTerraMetrics(data)))}),PRIVATE.regTerraMetrics=function(data){var cards,area;cards=PRIVATE.getMetrics(data.cards),area=data.area,cards&&area&&MODULE.regCardView(area,cards)},PRIVATE.getMetrics=function(cards){for(var objCard,j,premiumCards,listMetrics=[],i=0;i<cards.length;i++)if(objCard=cards[i],"AD"!==objCard.htmlDataset("type"))if("P"===objCard.htmlDataset("type"))for(premiumCards=PRIVATE.getMetricPremium(objCard),j=0;j<premiumCards.length;j++)listMetrics.push(premiumCards[j]);else listMetrics.push(PRIVATE.getMetricCard(objCard));return listMetrics},PRIVATE.getMetricCard=function(objCard){var cardTitle,cardId="",sourceName="",objMetric=[],reason="",reasonDetail="",channelInfo="",sourceType="",cardType="";return objCard&&(cardId=objCard.id,cardTitle="A"===objCard.htmlDataset("type")&&""===objCard.title?objCard.htmlDataset("appName"):objCard.title,objCard.htmlDataset("channelInfo")&&(channelInfo=objCard.htmlDataset("channelInfo")),objCard.htmlDataset("id")&&(cardId=objCard.htmlDataset("id")),objCard.htmlDataset("sourceName")&&(sourceName=objCard.htmlDataset("sourceName")),objCard.htmlDataset("sourceTypes")&&(sourceType=PRIVATE.getSourceTypes(objCard)),objCard.htmlDataset("type")&&(cardType=PRIVATE.getCardType(objCard.htmlDataset("type"))),reason=objCard.htmlDataset("reason"),reasonDetail=objCard.htmlDataset("reasonDetail")),objMetric.push(cardId),objMetric.push(reason),objMetric.push(reasonDetail),objMetric.push(cardTitle),objMetric.push(channelInfo),objMetric.push(sourceName),objMetric.push(sourceType),objMetric.push(cardType),objMetric},PRIVATE.getMetricPremium=function(objPremium){for(var listMetrics=[],objMetric,sourceName,channelInfo,sourceType="",cardType="",reason=objPremium.htmlDataset("reason"),reasonDetail=objPremium.htmlDataset("reasonDetail"),items=objPremium.querySelectorAll(".item-premium"),i=0;i<items.length;i++)channelInfo="",sourceName="",items[i].htmlDataset("channelInfo")&&(channelInfo=items[i].htmlDataset("channelInfo")),items[i].htmlDataset("sourceName")&&(sourceName=items[i].htmlDataset("sourceName")),items[i].htmlDataset("sourceTypes")&&(sourceType=PRIVATE.getSourceTypes(items[i])),items[i].htmlDataset("type")&&(cardType=PRIVATE.getCardType(items[i].htmlDataset("type"))),objMetric=[],objMetric.push(items[i].id),objMetric.push(reason),objMetric.push(reasonDetail),objMetric.push(items[i].title),objMetric.push(channelInfo),objMetric.push(sourceName),objMetric.push(sourceType),objMetric.push(cardType),listMetrics.push(objMetric);return listMetrics},PRIVATE.getSourceTypes=function(objCard){var elemA,url,type="",sourceTypes=objCard.htmlDataset("sourceTypes");return elemA=objCard.querySelector(".main-url")||objCard,elemA&&elemA.href&&(url=elemA.href),sourceTypes=sourceTypes.split(","),PRIVATE.getIndexArray(sourceTypes,"PRT")!==!1&&url?type=PRIVATE.isInternalDomain(url)?"interno":"externo":PRIVATE.getIndexArray(sourceTypes,"SRC")!==!1&&(type="agencia"),type},PRIVATE.getCardType=function(type){var cardTypes={N:"not",S:"not",V:"vid",EPL:"vid"};return cardTypes[type]},PRIVATE.isInternalDomain=function(url){return url&&(url.search("www.terra.com.br")>-1||url.search("tpn.terra.com")>-1)},PRIVATE.getIndexArray=function(array,val){for(var i=0,j=array.length;j>i;i++)if(array[i]===val)return i;return!1},MODULE.regCardView=function(area,tableCards){try{"undefined"!=typeof window.terra_stats_regTraffic&&window.terra_stats_regTraffic({usractn:area,cards:tableCards})}catch(err){console.error("Scroll - Metrics Fail: "+err.message)}},MODULE.regTrafficSource=function(){try{"undefined"!=typeof window.terra_stats_regTraffic&&window.terra_stats_regTraffic({})}catch(err){console.error("Traffic Source - Metrics Fail - First Call: "+err.message)}},MODULE},teardown:function(data){}})}),zaz.use(function newHistories(pkg){"use strict";pkg.factoryManager.get("mod").create({name:"newHistories",version:"1.0.0",state:"ok",docs:"http://github.tpn.terra.com/pages/terra/zaz-app-infinite",source:"http://github.tpn.terra.com/Terra/zaz-app-infinite",description:"Carrega as novas historias em realtime",dependencies:["app.cards","mod.scrollToAnimate"],tests:"http://s1.trrsf.com/fe/zaz-app-infinite/tests/index.htm?zaz[env]=tests",setup:function(data){var MODULE={},CONF={},PRIVATE={};return CONF.cardsBuffer=[],CONF.cardsRenderTest={},CONF.cardsTotal=0,CONF.firstMensage=!0,CONF.hasScroll=!1,CONF.metricsCount=1,CONF.objCards=new data.dependencies.app.cards,CONF.modScrollToAnimate=data.dependencies["mod.scrollToAnimate"],CONF.pageTile=document.title,PRIVATE.newHistories=function(){pkg.require(["Realtime"],function(Realtime){"prd"!==pkg.context.publisher.get("env")&&Realtime.setEnvironment("hlg"),Realtime.addSubscriber({channel:pkg.context.page.get("locale")+".NewStories",message:1,type:"O",insert:function(channelCode,realtimeId,data,realtime){if(CONF.firstMensage)CONF.firstMensage=!1;else{var json=window.Realtime.parseJSON(data);json&&MODULE.addBuffer(json)}}})})},MODULE.addBuffer=function(json){var arrayChannels,contentId,hasChannel=null;return CONF.cardsBuffer.length>=10?!1:(json&&json.context&&(arrayChannels=json.context.replace(/ /g,"").split(","),hasChannel=PRIVATE.inArray(arrayChannels,pkg.context.page.get("channel"))),"insert"==json.flag&&hasChannel&&json.card&&(contentId="custom"===json.card.type?json.card.contentId:json.card.items[0].id,CONF.cardsRenderTest[contentId]||document.getElementById(contentId)||("custom"===json.card.type?setTimeout(function(){PRIVATE.getCardData(json.card.cardId)},5e3):CONF.cardsBuffer.push(json.card),CONF.cardsRenderTest[contentId]=!0)),void PRIVATE.showNotification())},PRIVATE.getCardData=function(cardId){pkg.require(["mod.xRequest"],function(XRequest){var req=new XRequest;req.get({url:"https://syndication.terra.com/feeder/cards/card/"+cardId+".json?site=Brasil&access_token=8da2b022-529b-4a71-a569-66fa5b1141ef",dataType:"json",success:function(cardData){cardData&&(CONF.cardsBuffer.push(cardData),PRIVATE.showNotification())}})})},PRIVATE.showNotification=function(){if(0===CONF.cardsBuffer.length)return!1;var labelName="labelNewHistory";CONF.objNotification.style.display="block",PRIVATE.getPositions(),CONF.cardsBuffer.length>1&&(labelName="labelNewsHistories"),CONF.objNotification.innerHTML="<span><em>"+CONF.cardsBuffer.length+"</em><label> "+CONF.objDict.get(labelName)+"</label></span>",document.title="("+CONF.cardsBuffer.length+") "+CONF.pageTile,CONF.hasScroll||"samepage"==pkg.context.page.get("includetype")||(CONF.objNotification.style.top=CONF.positionNotification+"px")},PRIVATE.closeNotification=function(){document.title=CONF.pageTile,CONF.objNotification.style.display="none",window.removeEventListener("click",PRIVATE.controlPosition,!1)},PRIVATE.loadApp=function(json,container){var appName=json.name,appWithLoad={"app.teams":!0,"app.horoscope":!0,"app.weather":!0,"app.standings":!0,"app.financial":!0,"app.subjectsList":!0,"app.profilesList":!0};appName?pkg.require([appName],function(App){var objApp=new App({data:json,container:container});appWithLoad[appName]&&objApp.init()}):CONF.objTableCards.removeChild(container)},PRIVATE.flushBuffer=function(){var cardData=null,cardObj=null,tableCards=[];CONF.objTableNewHistories.style.display="block";for(var x in CONF.cardsBuffer)CONF.cardsBuffer.hasOwnProperty(x)&&(CONF.cardsTotal++,cardData=CONF.cardsBuffer[x],cardData.croupier={reasons:{n:{}}},1===CONF.cardsTotal&&PRIVATE.loadAdNewHistories(cardData.id),7===CONF.cardsTotal&&(CONF.cardsTotal=0),"A"!==cardData.type?(cardObj=CONF.objCards.renderCard(cardData,{size:"w2h2"}),tableCards.push(cardObj.firstElementChild),CONF.objTableCards.insertBefore(cardObj,CONF.objTableCards.firstChild)):(cardObj=document.createElement("div"),cardObj.className="cards w2h2 new",cardObj.id=cardData.id,cardObj.htmlDataset("reason","n"),cardObj.htmlDataset("reasonDetail",""),cardObj.htmlDataset("type","A"),cardObj.title=cardData.items&&cardData.items[0]?cardData.items[0].title:"",cardData.id||(cardObj.id=cardData.items&&cardData.items[0]?cardData.items[0].id:parseInt(1e4*Math.random())),tableCards.push(cardObj),CONF.objTableCards.insertBefore(cardObj,CONF.objTableCards.firstChild),PRIVATE.loadApp(cardData,cardObj)));if(CONF.cardsBuffer=[],PRIVATE.closeNotification(),"embedd"===pkg.context.page.get("includetype"))window.changeHeight(document.body.scrollHeight);else{var pos=0,objNewsHistories=document.getElementById("zaz-news-histories");objNewsHistories&&(pos=objNewsHistories.offsetTop-CONF.positionNotification),CONF.modScrollToAnimate.scrollTo(pos,200)}tableCards.length>0&&(pkg.context.page.trigger("register-metrics",{sender:"app.infinite",type:"card-view",cards:tableCards,area:"NovasHistorias "+CONF.metricsCount}),CONF.metricsCount++)},PRIVATE.loadAdNewHistories=function(cardId){var cardID="ad-"+cardId,cardObj=document.createElement("div");cardObj.className="cards w2h2 advertising advcards",cardObj.style.background="#FFFFFF",cardObj.id="card-"+cardId,cardObj.innerHTML='<h3 class="lbl-advertising">'+CONF.objDict.get("advertising")+'</h3><div id="'+cardID+'"></div>',CONF.objTableCards.insertBefore(cardObj,CONF.objTableCards.firstChild),pkg.require(["mod.adManager"],function(AdManager){var tgmKey=pkg.context.page.get("tgmkey")||window.tgmKey||"br.homepage.home";"object"==typeof tgmKey&&tgmKey.home&&(tgmKey=tgmKey.home),AdManager.configure({TGMKEY:tgmKey,PLATFORM:"mob"===pkg.context.platform.get("type")?"mob":"web"});var admanager=new AdManager;admanager.stickAd({placeholder:document.getElementById(cardID),area:"novashistorias"}).then(function(meta){cardObj.className="cards w2h2 advertising advcards"})})},PRIVATE.getPositions=function(){if(CONF.objNavbar&&CONF.objNavbar.offsetHeight>0&&(CONF.navbarHeight=CONF.objNavbar.offsetHeight),"mob"===pkg.context.platform.get("type")&&CONF.hasSticky&&"samepage"!==pkg.context.page.get("includetype")&&pkg.context.page.get("mediaService")!==!0){var objGambitTable=document.getElementById("zaz-gambit-table");objGambitTable&&objGambitTable.offsetTop>0&&(CONF.positionNotification=objGambitTable.offsetTop-8,CONF.objNotification.style.position="absolute",CONF.objNotification.style.top=CONF.positionNotification+"px",CONF.navbarHeight+=55,CONF.scrollActived=!1,CONF.hasScroll=!0,PRIVATE.controlPosition(),window.addEventListener("scroll",PRIVATE.controlPosition,!1,{controller:"none",time:0}))}else CONF.positionNotification=CONF.navbarHeight+5;CONF.positionNotification||(CONF.positionNotification=60)},PRIVATE.controlPosition=function(){if("block"!==CONF.objNotification.style.display)return!1;var posScroll=window.scrollY||window.pageYOffset;posScroll+=CONF.navbarHeight,!CONF.scrollActived&&posScroll>=CONF.positionNotification?(CONF.scrollActived=!0,CONF.objNotification.style.position="fixed",CONF.objNotification.style.top=CONF.navbarHeight+"px"):CONF.positionNotification>posScroll&&"fixed"===CONF.objNotification.style.position&&(CONF.objNotification.style.position="absolute",CONF.objNotification.style.top=CONF.positionNotification+"px",CONF.scrollActived=!1)},PRIVATE.inArray=function(array,val){for(var i=0,j=array.length;j>i;i++)if(array[i]===val)return!0;return!1},MODULE.init=function(data){CONF.objNewHistories=document.getElementById("zaz-news-histories"),data&&data.hasSticky&&(CONF.hasSticky=data.hasSticky),CONF.objNewHistories&&(PRIVATE.newHistories(),CONF.objTableNewHistories=CONF.objNewHistories.querySelector(".table-new-histories"),CONF.objTableCards=CONF.objNewHistories.querySelector(".table-cards"),CONF.objNotification=CONF.objNewHistories.querySelector(".notification"),CONF.objNavbar=document.getElementById("zaz--app-navbar-container"),CONF.objNotification.addEventListener("click",PRIVATE.flushBuffer),pkg.require(["dict.newHistories"],function(DictNewHistories){CONF.objDict=new DictNewHistories}))},MODULE.getBufferTotal=function(){return CONF.cardsBuffer.length},MODULE},teardown:function(data){}})}),zaz.use(function scrollToAnimate(pkg){"use strict";pkg.factoryManager.get("mod").create({name:"scrollToAnimate",version:"1.0.0",state:"ok",docs:"http://github.tpn.terra.com/pages/terra/zaz-app-infinite",source:"http://github.tpn.terra.com/Terra/zaz-app-infinite",description:"Scroll to",dependencies:[],tests:"http://s1.trrsf.com/fe/zaz-app-infinite/tests/index.htm?zaz[env]=tests",setup:function(data){function scrollToC(element,from,to,duration){0>duration||("object"==typeof from&&(from=from.offsetTop),"object"==typeof to&&(to=to.offsetTop),scrollToX(element,from,to,0,1/duration,20,easeOutCuaic))}function scrollToX(element,x1,x2,t,v,step,operacion){0>t||t>1||0>=v||(element.scrollTop=x1-(x1-x2)*operacion(t),t+=v*step,setTimeout(function(){scrollToX(element,x1,x2,t,v,step,operacion)},step))}function easeOutCuaic(t){return t--,t*t*t+1}var MODULE={};return MODULE.scrollTo=function(element,duration){var e=document.documentElement;if(0===e.scrollTop){var t=e.scrollTop;++e.scrollTop,e=t+1===e.scrollTop--?e:document.body}scrollToC(e,e.scrollTop,element,duration)},MODULE},teardown:function(data){}})}),zaz.use(function appInfinite(pkg){"use strict";var STATIC={};pkg.factoryManager.get("app").create({name:"infinite",version:"1.0.0",state:"ok",docs:"http://github.tpn.terra.com/pages/terra/infinite",source:"http://github.tpn.terra.com/Terra/infinite",description:"Just another app",tests:"http://s1.trrsf.com/fe/infinite/tests/index.htm?zaz[env]=tests",dependencies:["mod.viewable","app.cards","jQuery","mod.scrollToAnimate","mod.regMetrics"],dictionaries:[],setup:function(__static,__proto,__shared){window.addEventListener("resize",this.rangeViewport),this.rangeViewport()},rangeViewport:function(){var viewport=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,stage=document.getElementById("zaz-gambit"),range=0,reducePage=pkg.context.page.get("reducePage");"mob"===pkg.context.platform.get("type")?(stage.setAttribute("class","w320"),window.G.conf.windowSize=320,range=320):(768>viewport&&"web"!==pkg.context.platform.get("type")?(stage.setAttribute("class","w320"),window.G.conf.windowSize=320,range=320):1024>viewport?(stage.setAttribute("class","w768"),window.G.conf.windowSize=768,range=768):1280>viewport?(reducePage===!0?(stage.setAttribute("class","w768"),window.G.conf.windowSize=768):(stage.setAttribute("class","w1024"),window.G.conf.windowSize=1024),range=1024):viewport>=1280&&(reducePage===!0?(stage.setAttribute("class","w1024"),window.G.conf.windowSize=1024):(stage.setAttribute("class","w1280"),window.G.conf.windowSize=1280),range=1280),window.G.conf.windowRange!=range&&(window.G.conf.windowRange=range,STATIC.windowSize=window.G.conf.windowSize,pkg.context.page.trigger("resize-viewport",{sender:"gambit",windowSize:window.G.conf.windowSize,range:window.G.conf.windowRange})))},init:function(data,__shared){var PUBLIC=this,PRIVATE={},CONTEXT={};return PRIVATE.modViewable=new __shared.dependencies.mod.viewable(20),PRIVATE.modScrollToAnimate=__shared.dependencies.mod.scrollToAnimate,PRIVATE.modRegMetrics=__shared.dependencies.mod.regMetrics,PRIVATE.$=__shared.dependencies.jQuery,PRIVATE.appCards=new __shared.dependencies.app.cards,PRIVATE.isLoaded=!1,PRIVATE.isPageBlur=!1,PRIVATE.startTicker=!1,PRIVATE.tableWriteFlush=3,PRIVATE.croupierFetch=5,PRIVATE.croupierPage=1,PRIVATE.tableSequence=0,PRIVATE.bufferTables=[],PRIVATE.backPagePagination={},PRIVATE.hasMorePage=!0,PRIVATE.hasFooter=!1,PRIVATE.data=data,PRIVATE.getContext=function(){var queryStrings=pkg.context.page.get("query");CONTEXT.log=!1,queryStrings&&queryStrings.croupier&&(CONTEXT.croupier=queryStrings.croupier),queryStrings&&queryStrings["app.inifinite.log"]&&(CONTEXT.log=!0),CONTEXT.optimizePage=!1,CONTEXT.areaName="home",CONTEXT.feedCroupier="timeline_cb",CONTEXT.areasTagman=pkg.context.page.get("tagmanAreas"),CONTEXT.channelId=pkg.context.page.get("channelID"),CONTEXT.pageSize=pkg.context.page.get("pageSize"),CONTEXT.timelineSize=pkg.context.page.get("timelineSize"),CONTEXT.lomas=pkg.context.page.get("lomas"),CONTEXT.dflt=pkg.context.page.get("dflt"),CONTEXT.cardTypes=pkg.context.page.get("cardTypes"),CONTEXT.feedUuid=pkg.context.page.get("uuid"),CONTEXT.country=pkg.context.page.get("country"),CONTEXT.lang=pkg.context.page.get("lang"),CONTEXT.locale=pkg.context.page.get("locale"),CONTEXT.channel=pkg.context.page.get("channel"),CONTEXT.countryLive=pkg.context.page.get("countryLive"),CONTEXT.channelPath=pkg.context.page.get("channelPath"),CONTEXT.device=pkg.context.platform.get("type"),CONTEXT.timelineApps=pkg.context.page.get("timelineApps"),CONTEXT.timelinePages=pkg.context.page.get("timelinePages"),CONTEXT.searchTerms=pkg.context.page.get("search_terms"),CONTEXT.prioritized=pkg.context.page.get("prioritized"),CONTEXT.isLatestPage=pkg.context.page.get("isLatestPage");var infinteTableInfo=pkg.context.page.get("infinteTableInfo");PRIVATE.tableSequence=infinteTableInfo.tableSequence,PRIVATE.tableSequenceContent=infinteTableInfo.tableSequenceContent;var uaName=pkg.context.browser.get("name"),uaVersion=parseInt(pkg.context.browser.get("version"));"Internet Explorer"===uaName&&10>=uaVersion&&(CONTEXT.optimizePage=!0),PRIVATE.loadingFat=600,1280===STATIC.windowSize||1024===STATIC.windowSize?PRIVATE.loadingFat=600:768===STATIC.windowSize&&(PRIVATE.loadingFat=960),"mob"===CONTEXT.device&&(PRIVATE.loadingFat=3e3);var isLite=pkg.context.page.get("isLite");isLite&&(PRIVATE.loadingFat=200)},PRIVATE.configureAdManager=function(){PRIVATE.promiseAdManager=pkg.require(["mod.adManager"],function(AdManager){PRIVATE.tgmKey=pkg.context.page.get("tgmkey")||window.tgmKey||"br.homepage.home","object"==typeof PRIVATE.tgmKey&&PRIVATE.tgmKey.home&&(PRIVATE.tgmKey=PRIVATE.tgmKey.home),AdManager.configure({TGMKEY:PRIVATE.tgmKey,PLATFORM:"mob"!==CONTEXT.device?"web":"mob"})})},PRIVATE.setHashTable=function(objTable){objTable.addEventListener("click",function(event){var hash,tableType=this.htmlDataset("type"),tableArea=this.htmlDataset("area");if("TABLE-APP"===tableType&&"CUSTOM-CARDS"!==tableArea)hash="app-"+this.id;else for(var area="",depthSearch=20,element=event.target;depthSearch&&element;){if(element.className.search("cards")>-1){"NEWS"===tableType?area="area-"+tableArea:"TABLE-APP"===tableType&&"mob"!==CONTEXT.device&&(area="app-"+this.id),"mob"===CONTEXT.device?(hash="card-"+element.id,area&&(hash+="|"+area)):hash=area;break}if("NEWS"==element.htmlDataset("type"))break;element.parentNode&&(element=element.parentNode),depthSearch--}hash&&(window.location.hash="/"+hash)})},PRIVATE.tableHide=function(table){},PRIVATE.tableShow=function(table){var area=parseInt(table.htmlDataset("area")),listCards;return CONTEXT.optimizePage&&1===PRIVATE.croupierPage&&(table.style.display="block"),1===area&&PRIVATE.data.backPage&&!PRIVATE.startTicker&&(PRIVATE.startTicker=!0,pkg.require(["app.tickerLite"],function(TickerLite){var obj=new TickerLite({placeholder:document.getElementById("zaz--app-navbar-relative-container"),feed:window.feedLive||pkg.context.page.get("feedLive")})})),table.htmlDataset("showAd")?!1:(table.htmlDataset("showAd",!0),CONTEXT.log&&console.log("-----> RENDER TABLE AREA = "+area),("NEWS"===table.htmlDataset("type")||"AD"===table.htmlDataset("type"))&&PRIVATE.tableAdShow(table),("NEWS"===table.htmlDataset("type")||table.htmlDataset("cardsBackend"))&&(listCards=table.querySelectorAll(".cards"),PRIVATE.appCards.bindEvents(listCards),PRIVATE.lazyLoad(table)),void PRIVATE.startApps(table.querySelectorAll(".app")))},PRIVATE.lazyLoad=function(table){for(var listImages=table.querySelectorAll(".image-lazyload"),i=0;i<listImages.length;i++)listImages[i].src=listImages[i].htmlDataset("src")},PRIVATE.tableShowFull=function(table){return table.htmlDataset("showAd")?!1:(table.htmlDataset("showAd",!0),void PRIVATE.tableAdShow(table))},PRIVATE.tableRegisterMetrics=function(table){if(!table||table.htmlDataset("regMetrics"))return!1;if("NEWS"===table.htmlDataset("type")){var listCards=table.querySelectorAll(".cards");pkg.context.page.trigger("register-metrics",{sender:"app.infinite",type:"card-view",tableType:"NEWS",cards:listCards,area:"Scroll "+table.htmlDataset("areaContent")})}else"TABLE-APP"===table.htmlDataset("type")&&pkg.context.page.trigger("register-metrics",{sender:"app.infinite",type:"card-view",tableType:"TABLE-APP",area:table.htmlDataset("area")});table.htmlDataset("regMetrics",!0)},PRIVATE.tableViewable=function(table,status){return table?("NEWS"===table.htmlDataset("type")?pkg.context.page.trigger("table-visible-staus",{sender:"app.infinite",status:status,tableType:"NEWS",area:table.htmlDataset("area"),areaContent:table.htmlDataset("areaContent")}):"TABLE-APP"===table.htmlDataset("type")&&pkg.context.page.trigger("table-visible-staus",{sender:"app.infinite",status:status,tableType:"TABLE-APP",area:table.htmlDataset("area")}),void table.htmlDataset("regMetrics",!0)):!1},PRIVATE.tableAdShow=function(table){var tableAreaAD=table.htmlDataset("areaAd"),tableType=table.htmlDataset("type"),area=parseInt(table.htmlDataset("area")),placeholder;1===area&&window.performance&&window.performance.mark&&window.performance.mark("AD_S1_BEFORE_DFP"),PRIVATE.promiseAdManager.then(function(dependencies){var objAdmanager=new dependencies.mod.adManager;objAdmanager.getViewportAds(area).then(function(obj){var countAd=1,ads=obj.ADS,adsLen=ads.length,objLabel=null;if(CONTEXT.log&&console.log("-----> CALL AREA AD = "+area,ads),"mob"===CONTEXT.device&&2===adsLen){var tableFull=document.createElement("div");tableFull.id="table-full-"+area,tableFull.className="table-container full",tableFull.htmlDataset("area",area),tableFull.htmlDataset("type","AD"),tableFull.innerHTML='<div class="advertising advcards" id="ad-full-'+area+'"></div>',table.parentNode.insertBefore(tableFull,table.nextSibling)}for(var x=0;adsLen>x;x++)"card"===ads[x].type||"mob"===CONTEXT.device&&1===adsLen?(ads[x].placeholder="ad-"+area+"-"+countAd,ads[x].cardPlaceholder="card-ad-"+area+"-"+countAd,"mob"===CONTEXT.device&&"full"===ads[x].type&&1===adsLen&&(objLabel=PRIVATE.objGambitTable.querySelector("#"+ads[x].cardPlaceholder+" .lbl-advertising"),objLabel&&(objLabel.style.display="none")),countAd++):"full"===ads[x].type&&(ads[x].placeholder="ad-full-"+area,ads[x].cardPlaceholder="table-full-"+area);obj.instance.createAds({tgmkey:"br",ADS:ads}).then(function(advertising){CONTEXT.log&&console.log("-----> RENDER AREA AD = "+area,advertising)},function(advertisingError){CONTEXT.log&&console.log("-----> RENDER AREA AD ERROR = "+area,advertisingError)})},function(e){CONTEXT.log&&console.log("-----> ERROR AD",e)})})},PRIVATE.startApps=function(apps){var appsLength=apps.length,appWithLoad={"app.teams":!0,"app.horoscope":!0,"app.weather":!0,"app.standings":!0,"app.financial":!0,"app.subjectsList":!0,"app.profilesList":!0},loadApp=function(elemApp){var appName=CONTEXT.timelineApps[elemApp.id].name;pkg.require([appName],function(App){elemApp.className&&(elemApp.className=elemApp.className.replace(" loading-app",""));var objApp=new App({data:CONTEXT.timelineApps[elemApp.id],container:elemApp});appWithLoad[appName]&&objApp.init()})},loadOutbrain=function(elemApp){pkg.require(["app.relatedContent"],function(AppRelatedContent){elemApp&&elemApp.parentNode&&(elemApp.parentNode.className=elemApp.parentNode.className.replace(" loading-app",""),elemApp.className=elemApp.className.replace(" loading-app",""),-1===elemApp.className.search("cards")&&(elemApp.className="cards w2h2")),pkg.context.page.set("showOutbrainTable",!0);var instance=new AppRelatedContent({typeTable:"outBrain",idContainer:elemApp.id,json:{context:"home"},separatorLine:!0});instance.loadJsonList()},function(e){console.log("Error creating an instance of relatedContent: "+e)})},loadTaboola=function(elemApp){elemApp.className.search("loading-app")>-1&&(window._taboola=window._taboola||[],window._taboola.push({home:"auto"}),window._taboola.push({mode:"thumbnails-a",container:elemApp.id,placement:"Home Page Thumbnails",target_type:"mix"}),pkg.require(["mod.taboola"],function(Taboola){elemApp.className=elemApp.className.replace("loading-app","")}))};if(!(appsLength>0))return!1;for(var x=0;appsLength>x;x++)if(CONTEXT.timelineApps[apps[x].id]&&"false"!==apps[x].htmlDataset("renderApp"))try{"AUTOPLAY"===CONTEXT.timelineApps[apps[x].id].name&&(CONTEXT.timelineApps[apps[x].id].name="app.live"),"OUTBRAIN"===CONTEXT.timelineApps[apps[x].id].name?loadOutbrain(apps[x]):loadApp(apps[x])}catch(e){console.log("ERRO para iniciar o APP ------>",apps[x])}else"TABOOLA"===apps[x].htmlDataset("appName")&&loadTaboola(apps[x])},PRIVATE.setTableEvents=function(tables){var i=0,tableArea=0,tableLastArea=0,tableSetViewable=!1,tableType=0,tableFullPubs=[],offSetTop=0,offSetBottom=0,heightPercent=1,isBackPage;for(PRIVATE.data.backPage&&(isBackPage=!0),i=0;i<tables.length;i++)if(tableArea=tables[i].htmlDataset("area"),tableSetViewable=tables[i].htmlDataset("setViewable"),tableLastArea!=tableArea&&!tableSetViewable){if(tableType=tables[i].htmlDataset("type"),tables[i].htmlDataset("setViewable",!0),"AD"===tableType||"1"==tableArea&&"mob"!=CONTEXT.device||PRIVATE.setHashTable(tables[i]),isBackPage){if(tables[i].id===PRIVATE.data.backPage.elementID&&(isBackPage=!1),offSetTop=0,offSetBottom=0,heightPercent=.5,"AD"===tableType){tableFullPubs.push(tables[i]);continue}}else CONTEXT.optimizePage&&tableArea>=2&&1===PRIVATE.croupierPage?(tables[i].style.display="none",offSetTop=0,offSetBottom=0):(offSetTop=-PRIVATE.loadingFat,offSetBottom=100),heightPercent=1;PRIVATE.modViewable.onVisibilityChange({element:tables[i],onVisible:PRIVATE.tableShow,heightPercent:heightPercent,offsetTop:offSetTop,offsetBottom:offSetBottom}),"AD"!==tableType&&PRIVATE.modViewable.onVisibilityChange({element:tables[i],onVisible:function(table){PRIVATE.tableRegisterMetrics(table),PRIVATE.tableViewable(table,"visible")},onHidden:function(table){PRIVATE.tableViewable(table,"hidden")},heightPercent:1==tableArea?1:.5,offsetTop:1==tableArea?-200:0,offsetBottom:0}),tableLastArea=tableArea}if(1===PRIVATE.croupierPage){PRIVATE.backPagePagination[1]={page:PRIVATE.croupierPage,tableSequenceContent:PRIVATE.tableSequenceContent,tableSequence:PRIVATE.tableSequence};try{window.sessionStorage.setItem("infinite-page",JSON.stringify(PRIVATE.backPagePagination))}catch(e){CONTEXT.log&&console.log("-----> ERRRO ao setar o session storage",e)}}for(i=0;i<tableFullPubs.length;i++)PRIVATE.modViewable.onVisibilityChange({element:tableFullPubs[i],onVisible:PRIVATE.tableShowFull,heightPercent:0,offsetTop:-200,offsetBottom:-200})},PRIVATE.getMorePage=function(){!PRIVATE.isLoaded&&PRIVATE.bufferTables.length<=PRIVATE.croupierFetch&&PRIVATE.hasMorePage?PRIVATE.loadMorePage():PRIVATE.bufferTables.length>0&&PRIVATE.tableFlush()},PRIVATE.loadMorePage=function(){var croupierURL=location.protocol+"//"+location.hostname;PRIVATE.croupierPage++,PRIVATE.isLoaded=!0,location.port&&(croupierURL+=":"+location.port),croupierURL+="?html=1&ch="+CONTEXT.channelId+"&p="+PRIVATE.croupierPage+"&psz="+CONTEXT.pageSize+"&cb="+CONTEXT.feedCroupier+"&sz="+CONTEXT.timelineSize+"&channel_path="+CONTEXT.channelPath+"&lomas="+CONTEXT.lomas+"&dflt="+CONTEXT.dflt+"&card_types="+CONTEXT.cardTypes,"false"===CONTEXT.prioritized&&(croupierURL+="&prioritized="+CONTEXT.prioritized),croupierURL+="&context=country="+CONTEXT.country,croupierURL+=",lang="+CONTEXT.lang,croupierURL+=",locale="+CONTEXT.locale,croupierURL+=",channel="+CONTEXT.channel,croupierURL+=",idItemMenu="+CONTEXT.channel,croupierURL+=",countryLive="+CONTEXT.countryLive,croupierURL+=",device="+CONTEXT.device,croupierURL+=",channelID="+CONTEXT.channelId,croupierURL+=",deliverFormat=json",croupierURL+=",tableSequence="+PRIVATE.tableSequence,croupierURL+=",tableSequenceContent="+PRIVATE.tableSequenceContent,croupierURL+=",channelPath="+CONTEXT.channelPath,croupierURL+=",tmgKey="+PRIVATE.tgmKey,croupierURL+=",isLatestPage="+CONTEXT.isLatestPage,CONTEXT.searchTerms&&(croupierURL+=",renderSearch=1",croupierURL+="&search_terms="+encodeURIComponent(CONTEXT.searchTerms)),CONTEXT.croupier&&(croupierURL+="&croupier="+CONTEXT.croupier),PRIVATE.$.ajax({url:croupierURL,dataType:"json",responseType:"json",headers:{"X-XACT-Function":"timeline","X-XAct-Original-UUID":CONTEXT.feedUuid},success:function(data,xhr){PRIVATE.parsePageData(data)},error:function(e){PRIVATE.isLoaded=!1,PRIVATE.tableFlush(),CONTEXT.log&&console.log("-----> ERRRO croupier request",e)}})},PRIVATE.parsePageData=function(data){var x,tables=data.tables,apps=data.timelineApps;for(x in tables)tables.hasOwnProperty(x)&&(PRIVATE.tableSequenceContent=tables[x].tableInfo.tableSequenceContent,PRIVATE.tableSequence=tables[x].tableInfo.tableSequence,PRIVATE.bufferTables.push(tables[x]));PRIVATE.backPagePagination[PRIVATE.croupierPage]={page:PRIVATE.croupierPage,tableSequenceContent:PRIVATE.tableSequenceContent,tableSequence:PRIVATE.tableSequence};try{window.sessionStorage.setItem("infinite-page",JSON.stringify(PRIVATE.backPagePagination))}catch(e){CONTEXT.log&&console.log("-----> ERRRO ao setar o session storage",e)}for(x in apps)apps.hasOwnProperty(x)&&(CONTEXT.timelineApps[x]=apps[x]);data.num_pages<=PRIVATE.croupierPage&&(PRIVATE.hasMorePage=!1),PRIVATE.isLoaded=!1,PRIVATE.tableFlush()},PRIVATE.tableFlush=function(){var objTables=document.createElement("div"),html="",stepLength=PRIVATE.tableWriteFlush;PRIVATE.tableWriteFlushAll&&(stepLength=50);for(var i=0;stepLength>i&&PRIVATE.bufferTables.length;i++)html+=PRIVATE.bufferTables[0].html,PRIVATE.bufferTables.splice(0,1);if(""!==html&&(objTables.innerHTML=html,PRIVATE.objGambitTable.appendChild(objTables),PRIVATE.setTableEvents(objTables.querySelectorAll(".table-container"))),PRIVATE.hasMorePage||0!==PRIVATE.bufferTables.length||PRIVATE.hasFooter||PRIVATE.loadFooter(),PRIVATE.tableWriteFlushAll){PRIVATE.tableWriteFlushAll=!1;var element=document.getElementById(PRIVATE.data.backPage.elementID);pkg.context.page.onceAt("load",function(){location.hash=PRIVATE.data.backPage.elementID,PRIVATE.setTableEvents(PRIVATE.firstPageTables)})}},PRIVATE.loadFooter=function(){var objMorePage=document.getElementById("infinite-more-page");objMorePage.parentNode.removeChild(objMorePage),PRIVATE.hasFooter=!0,pkg.require(["app.footer"],function(Footer){var t=new Footer,objFooter=document.getElementById("trr-navbar-footer");
objFooter.style.display="block"})},PRIVATE.pageFocus=function(){PRIVATE.isPageBlur&&PUBLIC.modNewHistories.getBufferTotal()>=10&&"embedd"!==pkg.context.page.get("includetype")&&"samepage"!==pkg.context.page.get("includetype")?window.location.href=window.top.location.protocol+"//"+window.top.location.hostname+window.top.location.pathname:PRIVATE.isPageBlur=!1},PRIVATE.pageBlur=function(){PRIVATE.isPageBlur=!0},PRIVATE.setBackToTop=function(){var objBackTop=document.getElementById("back-top"),gambitPosition=PRIVATE.objGambitTable.offsetTop,targetLine=gambitPosition+300,flagVisible=!1,e=document.documentElement;if(0===e.scrollTop){var t=e.scrollTop;++e.scrollTop,e=t+1===e.scrollTop--?e:document.body}var buttomBack=objBackTop.querySelector("a");buttomBack.addEventListener("click",function(){var pos=0;pkg.context.page.get("includetype")&&(pos=gambitPosition),PRIVATE.modScrollToAnimate.scrollTo(pos,200)}),window.addEventListener("scroll",function(){setTimeout(function(){e.scrollTop>targetLine?flagVisible||(objBackTop.className="show",flagVisible=!0):flagVisible&&(objBackTop.className="",flagVisible=!1)},1e3)})},PRIVATE.setInfinitePagination=function(){var objMorePage=document.getElementById("infinite-more-page");1!=CONTEXT.timelinePages?PRIVATE.modViewable.onVisibilityChange({element:objMorePage,heightPercent:1,onVisible:PRIVATE.getMorePage,offsetTop:-PRIVATE.loadingFat,offsetBottom:0}):(objMorePage.style.display="none",PRIVATE.loadFooter())},PUBLIC.init=function(){var addEvents=!0;if(PRIVATE.objGambitTable=document.getElementById("zaz-gambit-table"),PRIVATE.firstPageTables=PRIVATE.objGambitTable.querySelectorAll(".table-container"),PRIVATE.getContext(),PRIVATE.configureAdManager(),PRIVATE.data.backPage&&!document.getElementById(PRIVATE.data.backPage.elementID)){var infinitePage=null,area=0;try{infinitePage=JSON.parse(window.sessionStorage.getItem("infinite-page"))}catch(e){CONTEXT.log&&console.log("-----> ERRRO ao buscar do session storage",e)}if("area"===PRIVATE.data.backPage.type?area=parseInt(PRIVATE.data.backPage.value):"card"===PRIVATE.data.backPage.type&&(area=parseInt(PRIVATE.data.backPage.area)),infinitePage&&area>0){for(var x in infinitePage)if(infinitePage.hasOwnProperty(x)&&infinitePage[x].tableSequence>=area)break;var pageNum=infinitePage[x].page-1;PRIVATE.tableSequenceContent=infinitePage[pageNum].tableSequenceContent,PRIVATE.tableSequence=infinitePage[pageNum].tableSequence,PRIVATE.croupierPage=infinitePage[pageNum].page,PRIVATE.tableWriteFlushAll=!0,PRIVATE.backPagePagination=infinitePage,PRIVATE.loadMorePage(),addEvents=!1}}0===CONTEXT.timelinePages&&(PRIVATE.croupierPage=0,PRIVATE.loadMorePage()),addEvents&&PRIVATE.setTableEvents(PRIVATE.firstPageTables),PRIVATE.setInfinitePagination(),PRIVATE.setBackToTop(),CONTEXT.isLatestPage||pkg.require(["mod.newHistories"],function(ModNewHistories){PRIVATE.promiseAdManager.then(function(dependencies){var hasSticky=dependencies.mod.adManager.get("s0StickyMob")||!1;PUBLIC.modNewHistories=ModNewHistories,PUBLIC.modNewHistories.init({hasSticky:hasSticky}),window.addEventListener("blur",function(){PRIVATE.pageBlur()}),window.addEventListener("focus",function(){PRIVATE.pageFocus()})})},function(e){CONTEXT.log&&console.log("-----> Error creating an instance of mod.newHistories:",e)})},PUBLIC},teardown:function(why,__static,__proto,__shared){}})});