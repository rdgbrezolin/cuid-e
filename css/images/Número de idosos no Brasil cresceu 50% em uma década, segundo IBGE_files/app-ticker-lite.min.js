/*! zaz-app-ticker-lite - v1.0.0 - 12/02/2018 -- 5:50pm */
zaz.use(function(pkg){"use strict";var console=pkg.console,dictFactory=pkg.factoryManager.get("dict");dictFactory.create({name:"tickerLite",version:"1.0.0",state:"ok","extends":[],langs:{global:{gameTime1:"Previa",gameTime2:"1° Tiempo",gameTime3:"Entretiempo",gameTime4:"2° Tiempo",gameTime5:"1° T Prórroga",gameTime6:"2° T Prórroga",gameTime7:"Penales",gameTime8:"Fin de partido",gameTime9:"Partido paralizado",liveEvents:"eventos en vivo",liveEvent:"evento en vivo"},pt:{gameTime1:"Pré-jogo",gameTime2:"1° Tempo",gameTime3:"Intervalo",gameTime4:"2° Tempo",gameTime5:"1° T Prorrogação",gameTime6:"2° T Prorrogação",gameTime7:"Penaltis",gameTime8:"Fim de jogo",gameTime9:"Partida paralizada",liveEvents:"eventos ao vivo",liveEvent:"evento ao vivo"},es:{},en:{}}})}),zaz.use(function appTickerLite(pkg){"use strict";var console=pkg.console,appFactory=pkg.factoryManager.get("app"),STATIC_PUBLIC=null,STATIC_PRIVATE={};appFactory.create({name:"tickerLite",version:"1.0.0",state:"ok",docs:"http://github.tpn.terra.com/pages/terra/ticker-lite",source:"http://github.tpn.terra.com/Terra/ticker-lite",description:"Just another app",tests:"http://s1.trrsf.com/fe/ticker-lite/tests/index.htm?zaz[env]=tests",dependencies:[],dictionaries:["tickerLite"],templates:{wrapper:"{% set sizePageable = '' %}{% set eventsLength = events|length %}{% set currentEventID = 0 %}{% set hasCurrentEvent = {'flag': False} %}{% if context and context.currentEventID %}{% set currentEventID = context.currentEventID|int %}{% for event in events %}{% if event.id == currentEventID %}{% if hasCurrentEvent.update({'flag': True}) %} {% endif %}{% endif %}{% endfor %}{% endif %}{% if hasCurrentEvent.flag %} {% set eventsLength = eventsLength - 1 %}{% endif %}{% if eventsLength > 4 and device != 'mob' %}{% set sizePageable = eventsLength * 541 %}{% elif device == 'mob' %}{% set sizePageable = eventsLength * 300 %}{% endif %}{% if sizePageable != '' %}{% set sizePageable = 'width:' + sizePageable|string() + 'px' %}{% endif %}{% set realtimeID = '' %}{% if live_feed and live_feed.LIVE and live_feed.LIVE.REALTIME %}{% set realtimeID = live_feed.LIVE.REALTIME.LASTESTID %}{% endif %}{% set tooltipText = '' %}{% if context and context.countryLive %}{% if context.countryLive == 'br' and eventsLength == 1 %}{% set tooltipText = 'evento ao vivo' %}{% elif context.countryLive == 'br' and eventsLength > 1 %}{% set tooltipText = 'eventos ao vivo' %}{% elif context.countryLive != 'br' and eventsLength == 1 %}{% set tooltipText = 'evento en vivo' %}{% elif context.countryLive != 'br' and eventsLength > 1 %}{% set tooltipText = 'eventos en vivo' %}{% endif %}{% endif %}<div id=\"zaz-app-ticker-lite\" class=\"events-count-{{eventsLength}}\" data-keep-index=\"10\" data-realtime-id=\"{{ realtimeID }}\"><nav class=\"grid-view\">{% if device != 'mob' %}<div class=\"page-nav previous disabled\"><span class=\"icon icon-32 icon-chevron-left-light\"></span></div><div class=\"page-nav next disabled\"><span class=\"icon icon-32 icon-chevron-right-light\"></span></div>{% else %}<div class=\"page-nav previous disabled\"><span class=\"icon icon-24 icon-chevron-left-light\"></span></div><div class=\"page-nav next disabled\"><span class=\"icon icon-24 icon-chevron-right-light\"></span></div>{% endif %}<ul class=\"grid-pageable\" style=\"{{ sizePageable }}\">{% for event in events %}{% if currentEventID != event.id %}{% if event.template == 'itemLive' %}{% include itemLive %}{% elif event.template == 'itemMatch' %}{% include itemMatch %}{% else %}{% include itemLiveBlog %}{% endif %}{% endif %}{% endfor %}</ul></nav><div class=\"tooltip\"><span>{{ eventsLength }}</span> {{ tooltipText }}</div><div class=\"pagination\">{% if eventsLength > 1 and device == 'mob' %}{% for x in range(eventsLength) %}<span class=\"bullet page{{ loop.index }}{{' active' if loop.index == 1 else '' }}\"></span>{% endfor %}{% endif %}</div></div>",itemMatch:'{% set imgShield1 = event.match.teams.team1.shield %}{% set imgShield2 = event.match.teams.team2.shield %}{% if event.match.teams.team1.shieldSource %}{% set imgShield1 = \'https://p2.trrsf.com/image/fget/cf/51/51/\'+ event.match.teams.team1.shieldSource|replace(\'http://\',\'\') %}{% endif %}{% if event.match.teams.team2.shieldSource %}{% set imgShield2 = \'https://p2.trrsf.com/image/fget/cf/51/51/\'+ event.match.teams.team2.shieldSource|replace(\'http://\',\'\') %}{% endif %}<li class="event match" id="ticker-event-{{ event.id }}" data-id="{{ event.id }}" data-teams-id="{{ event.match.teams.team1.providerClubId }},{{ event.match.teams.team2.providerClubId }}"><div class="separator"><span></span></div><div class="animation-goal"><span class="zoom-goal">Goool!</span></div><a href="{{ event.url }}" title="{{ event.match.teams.team1.name }} x {{ event.match.teams.team2.name }}"><div class="teams"><div class="name right"><span class="short">{{ event.match.teams.team1.nameAbbr }}</span><span class="big">{{ event.match.teams.team1.name }}</span></div><div class="team"><img src="{{ imgShield1 }}" alt="{{ event.match.teams.team1.name }}"></div><div class="score"><span class="goal team1">{{ event.match.teams.team1.score.points }}</span><span class="penlaty team1 {{ \'hide\' if event.match.gameTime.id != 7 else \'\' }}">({{ event.match.teams.team1.score.penalty }})</span><span class="versus">X</span><span class="penlaty team2 {{ \'hide\' if event.match.gameTime.id != 7 else \'\' }}">({{ event.match.teams.team2.score.penalty }})</span><span class="goal team2">{{ event.match.teams.team2.score.points }}</span></div><div class="team"><img src="{{ imgShield2 }}" alt="{{ event.match.teams.team2.name }}"></div><div class="name"><span class="short">{{ event.match.teams.team2.nameAbbr }}</span><span class="big">{{ event.match.teams.team2.name }}</span></div></div><div class="info">{{ event.coverage }} - <span class="{{ event.classDateManager }}" data-date="{{ event.dateTime }}">{{ event.date }}</span></div></a></li>',itemLive:'<li class="event live" id="ticker-event-{{ event.id }}" data-id="{{ event.id }}"><div class="separator"><span></span></div><a href="{{ event.url }}" class="item">{% if event.thumbSource %}<div class="thumb"><img src="{{ \'https://p2.trrsf.com/image/fget/cf/80/45/\' + event.thumbSource}}" alt="{{ event.videoTitle }}"><span class="icon icon-24 icon-play-white"></span><div class="shadow"></div></div>{% elif event.thumb %}<div class="thumb"><img src="{{ event.thumb }}" alt="{{ event.videoTitle }}"><span class="icon icon-24 icon-play-white"></span><div class="shadow"></div></div>{% endif %}<div class="description"><div class="title">{{ event.videoTitle }}</div></div></a></li>',itemLiveBlog:'<li class="event live" id="ticker-event-{{ event.id }}" data-id="{{ event.id }}"><div class="separator"><span></span></div><a href="{{ event.url }}" class="item">{% if event.thumbSource %}<div class="thumb"><img src="{{ \'https://p2.trrsf.com/image/fget/cf/80/45/\' + event.thumbSource}}" alt="{{ event.description }}"><span class="icon icon-24 icon-live-white"></span><div class="shadow"></div></div>{% elif event.thumb %}<div class="thumb"><img src="{{ event.thumb }}" alt="{{ event.description }}"><span class="icon icon-24 icon-live-white"></span><div class="shadow"></div></div>{% endif %}<div class="description"><div class="title">{{ event.description }}</div></div></a></li>'},expects:{properties:{placeholder:{type:"object",required:!0}}},setup:function(STATIC_PUBLIC,PUBLIC,__shared){},init:function(data,__shared){var PRIVATE={},PUBLIC=this;PRIVATE.acceptEventsType=[1,2,3,7],PRIVATE.pageEventId=pkg.context.page.get("eventID"),PRIVATE.eventStatus=2,PRIVATE.events=[],PRIVATE.data=data,PRIVATE.nav={itemsView:1,pages:0,currentPage:1,stepWidth:325,itemWidth:106.8},PRIVATE.resolutionStep={xlarge:1259,large:940,medium:620,small:620,xsmall:620},PRIVATE.resolutionRange="";var queryStrings=pkg.context.page.get("query");return queryStrings&&queryStrings.tickerStatus&&(PRIVATE.eventStatus=parseInt(queryStrings.tickerStatus)),PRIVATE.loadDateTime=function(elements){function fixDates(elemDateList){var x,objDateTime,dateString,dateFormarted,dateTimezone;for(x in elemDateList)if(elemDateList.hasOwnProperty(x)){if(dateString=elemDateList[x].htmlDataset("date"),!dateString)continue;dateFormarted=dateString.replace(/(\d{4})\-(\d{2})\-(\d{2}) (\d{2}):(\d{2}) (?:GMT|UTC)(Z|[+\-])(\d{2})(\d{2}).+/,"$1-$2-$3T$4:$5:00"),objDateTime=new PRIVATE.dateTime({input:{timestamp:dateFormarted,timezone:"UTC"},output:{format:"TIME",timezone:pkg.context.page.get("country").toUpperCase(),locale:pkg.context.page.get("locale")}}),objDateTime.bind(elemDateList[x])}}PRIVATE.dateTime?fixDates(elements):pkg.require(["mod.datetime"],function(ModDateTime){PRIVATE.dateTime=ModDateTime,fixDates(elements)})},PRIVATE.selectorElements=function(){PRIVATE.elements={},PRIVATE.elements.wrapper=PRIVATE.data.placeholder.querySelector("#zaz-app-ticker-lite"),PRIVATE.elements.gridView=PRIVATE.data.placeholder.querySelector(".grid-view"),PRIVATE.elements.gridPageable=PRIVATE.data.placeholder.querySelector(".grid-pageable"),PRIVATE.elements.pagination=PRIVATE.data.placeholder.querySelector(".pagination"),PRIVATE.elements.tooltip=PRIVATE.data.placeholder.querySelector(".tooltip"),PRIVATE.elements.elemNavNext=PRIVATE.elements.wrapper.querySelector(".page-nav.next"),PRIVATE.elements.elemNavPrevious=PRIVATE.elements.wrapper.querySelector(".page-nav.previous")},PRIVATE.loadFeed=function(){var contentApiUrl=location.protocol+"//p1.trrsf.com/cengine/",url=contentApiUrl+"ilive/getListTickerElements?contentType=json&country_code="+pkg.context.page.get("country")+"&lang="+pkg.context.page.get("lang")+"&navigation_code=home&status="+PRIVATE.eventStatus;pkg.require(["mod.xRequest"],function(ModXRequest){var objRequest=new ModXRequest;objRequest.get({url:url,responseType:"json",complete:function(json){if(json){var feed=json.responseText;feed=JSON.parse(feed),"object"==typeof feed&&PRIVATE.getActiveEvents(feed)}}})})},PRIVATE.getActiveEvents=function(liveFeed){var isAutoplay,queryStrings=pkg.context.page.get("query");if(liveFeed&&liveFeed.LIVE&&liveFeed.LIVE.GROUPS.GROUP){var groups=liveFeed.LIVE.GROUPS.GROUP,currentGroup,events,event,lastEvent,tmpEnabledHeaders=null;"object"!=typeof groups||groups instanceof window.Array||(groups=[groups]);for(var l=0;l<groups.length;l++){currentGroup=groups[l],events=currentGroup.CONTENT.EVENT,"object"!=typeof events||events instanceof window.Array||(events=[events]);for(var j=0;j<events.length;j++)event=events[j],isAutoplay=!1,1===event.CONFIGURATION.VIDEO_HOME&&event.VIDEO_HOME_CONFIG.indexOf(pkg.context.page.get("idItemMenu"))>=0&&""!==pkg.context.page.get("idItemMenu")&&(isAutoplay=!0),event.STATUS===PRIVATE.eventStatus&&PRIVATE.inArray(PRIVATE.acceptEventsType,event.EVENT_TYPE)&&PRIVATE.pageEventId!==event.ID&&!isAutoplay&&(0===PRIVATE.events.length||event.ORDER_BAR>=lastEvent.ORDER_BAR?PRIVATE.events.push(PRIVATE.normalizeData(event)):PRIVATE.events.unshift(PRIVATE.normalizeData(event)),lastEvent=event)}}PRIVATE.renderHTML(),PRIVATE.reorderEventsTeam(),liveFeed.LIVE&&liveFeed.LIVE.REALTIME&&liveFeed.LIVE.REALTIME.CHANNEL&&PRIVATE.loadChannelRealtime(liveFeed.LIVE.REALTIME.CHANNEL)},PRIVATE.normalizeData=function(data){var event=null;return 3===data.EVENT_TYPE||7===data.EVENT_TYPE?(1==data.TEAMS.TEAM[1].HOME&&data.TEAMS.TEAM.reverse(),event={template:"itemMatch",classDateManager:"date-manager",id:data.ID,url:data.URL,coverage:data.COVERAGE,dateTime:data.DATE_TIME,match:{gameTime:{name:PUBLIC.l10n.get("gameTime"+data.GAME_INFO.GAME_TIME.ID),id:data.GAME_INFO.GAME_TIME.ID},teams:{team1:{shield:data.TEAMS.TEAM[0].SHIELD,name:"br"===pkg.context.page.get("country")?data.TEAMS.TEAM[0].NAME_PT:data.TEAMS.TEAM[0].NAME_ES,nameAbbr:"br"===pkg.context.page.get("country")?data.TEAMS.TEAM[0].SHORT_NAME_PT:data.TEAMS.TEAM[0].SHORT_NAME_ES,providerClubId:data.TEAMS.TEAM[0].PROVIDER_CLUB_ID,score:{points:data.TEAMS.TEAM[0].SCORE.GOALS,penalty:data.TEAMS.TEAM[0].SCORE.PENALTY}},team2:{shield:data.TEAMS.TEAM[1].SHIELD,name:"br"===pkg.context.page.get("country")?data.TEAMS.TEAM[1].NAME_PT:data.TEAMS.TEAM[1].NAME_ES,nameAbbr:"br"===pkg.context.page.get("country")?data.TEAMS.TEAM[1].SHORT_NAME_PT:data.TEAMS.TEAM[1].SHORT_NAME_ES,providerClubId:data.TEAMS.TEAM[1].PROVIDER_CLUB_ID,score:{points:data.TEAMS.TEAM[1].SCORE.GOALS,penalty:data.TEAMS.TEAM[1].SCORE.PENALTY}}}}}):1===data.EVENT_TYPE?event={template:"itemLive",id:data.ID,group:data.TAG,coverageId:data.COVERAGE_ID,coverage:data.COVERAGE,url:data.URL,urlMobile:data.CONFIGURATION.MOBILE_PLAY_URL,rerun:data.RERUN,hd:data.CONFIGURATION.HD,videoHome:data.CONFIGURATION.HOME,videoTitle:data.CONFIGURATION.TITLE,videoSubtitle:data.CONFIGURATION.DESCRIPTION,thumb:data.THUMB,thumbSource:data.THUMB_SOURCE}:2===data.EVENT_TYPE&&(event={template:"itemLiveBlog",id:data.ID,group:data.TAG,coverageId:data.COVERAGE_ID,coverage:data.COVERAGE,description:data.EVENT_DESCRIPTION,url:data.URL,thumb:data.THUMB,thumbSource:data.THUMB_SOURCE}),event},PRIVATE.renderHTML=function(){for(var hasDate=!1,wrapperHTML=document.getElementById("zaz-app-ticker-lite"),i=0;i<PRIVATE.events.length;i++)if("itemMatch"===PRIVATE.events[i].template){hasDate=!0;break}if(!wrapperHTML){wrapperHTML=PUBLIC.templates.render("wrapper",{events:PRIVATE.events,device:pkg.context.platform.get("type")});var oldTicker=document.getElementById("ticker-events-container");oldTicker&&PRIVATE.data.placeholder.removeChild(oldTicker);var referenceNode=document.getElementById("zaz-nb-plugin-open-menu");referenceNode?PRIVATE.data.placeholder.insertBefore(wrapperHTML,referenceNode):PRIVATE.data.placeholder.appendChild(wrapperHTML)}PRIVATE.selectorElements(),PRIVATE.setNavigation(),hasDate&&PRIVATE.loadDateTime(PRIVATE.elements.gridPageable.querySelectorAll(".event.match .date-manager"))},PRIVATE.reorderEventsTeam=function(){var elemEvents=PRIVATE.elements.gridPageable.querySelectorAll(".event");elemEvents&&pkg.context.user.get("myTeam",function(userTeam){var teamsId;if(userTeam&&userTeam.musa_id)for(var ip=0;ip<elemEvents.length;ip++)teamsId=elemEvents[ip].htmlDataset("teamsId"),teamsId&&(teamsId=teamsId.split(",")),teamsId&&PRIVATE.inArray(teamsId,userTeam.musa_id)&&PRIVATE.elements.gridPageable.insertBefore(elemEvents[ip],PRIVATE.elements.gridPageable.firstChild)})},PRIVATE.createEvent=function(event){var tempTeam,hasDate=!1,wrapperHTML=document.createElement("div");if(event){if(3===event.eventType||7===event.eventType){event.template="itemMatch",hasDate=!0,event.match.teams.team1.home||(tempTeam=event.match.teams.team1,event.match.teams.team1=event.match.teams.team2,event.match.teams.team2=tempTeam);var dateY,dateM,dateD,dateH,dateMN;!event.date&&event.timestamp?(event.timestamp=event.timestamp.replace(/[A-Z]/g,""),dateY=event.timestamp.substring(0,4),dateM=event.timestamp.substring(4,6),dateD=event.timestamp.substring(6,8),dateH=event.timestamp.substring(8,10),dateMN=event.timestamp.substring(10,12),event.dateTime=dateD+"-"+dateM+"-"+dateY+" "+dateH+":"+dateMN+":00",event.classDateManager="date-manager"):event.date&&(event.dateTime=event.date,event.date="",event.classDateManager="date-manager")}else 1===event.eventType?event.template="itemLive":2===event.eventType&&(event.template="itemLiveBlog");PRIVATE.events.push(event),wrapperHTML.innerHTML=PUBLIC.templates.get(event.template).render({event:event,device:pkg.context.platform.get("type")}),PRIVATE.elements.gridPageable.appendChild(wrapperHTML.firstChild),PRIVATE.calcNavigation(),PRIVATE.reorderEventsTeam(),hasDate&&PRIVATE.loadDateTime(PRIVATE.elements.gridPageable.querySelectorAll("#ticker-event-"+event.id+" .date-manager"))}},PRIVATE.removeEvent=function(data){for(var elemEvent,elemParentEvent,event=data.content,removed=!1,i=0;i<PRIVATE.events.length;i++)if(PRIVATE.events[i].id===event.id){PRIVATE.events.splice(i,1),elemEvent=PRIVATE.elements.gridPageable.querySelector("#ticker-event-"+event.id),elemEvent&&(elemParentEvent=elemEvent.parentElement,elemParentEvent&&(elemParentEvent.removeChild(elemEvent),removed=!0));break}removed&&(0===PRIVATE.events.length?PRIVATE.elements.wrapper.className="hide":PRIVATE.calcNavigation())},PRIVATE.renderBullets=function(){for(var bulletsHTML="",i=0;i<PRIVATE.nav.pages;i++)bulletsHTML+='<span class="bullet page'+(i+1)+(0===i?" active":"")+'"></span>';PRIVATE.elements.pagination.innerHTML=bulletsHTML},PRIVATE.bindTouchEvents=function(){pkg.require(["mod.hammer"],function(Hammer){var h=new Hammer(PRIVATE.elements.gridPageable);h.on("swipe",function(e){e.direction===Hammer.DIRECTION_LEFT?PRIVATE.navNext():e.direction===Hammer.DIRECTION_RIGHT&&PRIVATE.navPrevious()})})},PRIVATE.bindArrowEvents=function(){PRIVATE.elements.elemNavNext&&PRIVATE.elements.elemNavNext.addEventListener("click",PRIVATE.navNext),PRIVATE.elements.elemNavPrevious&&PRIVATE.elements.elemNavPrevious.addEventListener("click",PRIVATE.navPrevious)},PRIVATE.controlArrows=function(){PRIVATE.elements.elemNavNext.className=PRIVATE.elements.elemNavNext.className.replace(" disabled",""),PRIVATE.elements.elemNavPrevious.className=PRIVATE.elements.elemNavPrevious.className.replace(" disabled",""),1==PRIVATE.nav.pages&&(PRIVATE.elements.elemNavNext.className+=" disabled"),1==PRIVATE.nav.currentPage&&(PRIVATE.elements.elemNavPrevious.className+=" disabled")},PRIVATE.setNavigation=function(){PRIVATE.calcNavigation(),PRIVATE.bindArrowEvents(),"mob"===pkg.context.platform.get("type")?(PRIVATE.bindTouchEvents(),window.addEventListener("orientationchange",PRIVATE.calcNavigation)):window.addEventListener("resize",function(){PRIVATE.resolutionRange!=pkg.context.page.get("range")&&PRIVATE.calcNavigation()})},PRIVATE.calcNavigation=function(){var i,itemsWithAuto=!1,elemEvents=PRIVATE.elements.gridPageable.querySelectorAll(".event"),eventsLenght=elemEvents.length,resolution=0;if(0===eventsLenght)return!1;if("mob"!==pkg.context.platform.get("type")){PRIVATE.resolutionRange=pkg.context.page.get("range"),resolution=PRIVATE.resolutionStep[PRIVATE.resolutionRange]-79;var tempItemsView=Math.floor(resolution/280);PRIVATE.nav.itemsView=eventsLenght>tempItemsView?tempItemsView:eventsLenght}else resolution=260;PRIVATE.nav.currentPage=1,PRIVATE.nav.stepWidth=resolution,PRIVATE.nav.itemWidth=Math.round(resolution/PRIVATE.nav.itemsView),PRIVATE.nav.pages=Math.ceil(eventsLenght/PRIVATE.nav.itemsView),PRIVATE.nav.exactPages=eventsLenght%PRIVATE.nav.itemsView===0,PRIVATE.nav.itemsLength=eventsLenght,PRIVATE.elements.wrapper.className="events-count-"+eventsLenght,PRIVATE.elements.tooltip.innerHTML="<span>"+eventsLenght+"</span> "+PUBLIC.l10n.get("liveEvent"+(eventsLenght>1?"s":""));var gridPageable=eventsLenght*PRIVATE.nav.itemWidth;gridPageable<PRIVATE.nav.stepWidth&&(gridPageable=PRIVATE.nav.stepWidth),PRIVATE.elements.gridPageable.className="grid-pageable",PRIVATE.setTranslate(PRIVATE.elements.gridPageable,0),PRIVATE.elements.gridPageable.style.width=gridPageable+"px",PRIVATE.nav.pages>1?PRIVATE.renderBullets():PRIVATE.elements.pagination.innerHTML="",PRIVATE.controlArrows()},PRIVATE.navPrevious=function(){var stepWidth=PRIVATE.nav.stepWidth;PRIVATE.nav.currentPage>1&&(PRIVATE.nav.currentPage--,PRIVATE.setTranslate(PRIVATE.elements.gridPageable,-(PRIVATE.nav.currentPage-1)*stepWidth),PRIVATE.navBullets(),PRIVATE.controlArrows())},PRIVATE.navNext=function(){var translateWidth,stepWidth=PRIVATE.nav.stepWidth;PRIVATE.nav.currentPage<PRIVATE.nav.pages?(PRIVATE.nav.currentPage++,PRIVATE.nav.currentPage!==PRIVATE.nav.pages||PRIVATE.nav.exactPages?translateWidth=(PRIVATE.nav.currentPage-1)*stepWidth:(stepWidth=(PRIVATE.nav.itemsLength-PRIVATE.nav.itemsView*(PRIVATE.nav.pages-1))*PRIVATE.nav.itemWidth,translateWidth=(PRIVATE.nav.currentPage-2)*PRIVATE.nav.stepWidth+stepWidth),PRIVATE.setTranslate(PRIVATE.elements.gridPageable,-translateWidth),PRIVATE.navBullets(),PRIVATE.controlArrows()):(translateWidth=0,PRIVATE.nav.currentPage=1,PRIVATE.setTranslate(PRIVATE.elements.gridPageable,translateWidth),PRIVATE.navBullets(),PRIVATE.controlArrows())},PRIVATE.navBullets=function(){var elemBullet=PRIVATE.elements.pagination.querySelector(".active");elemBullet.className=elemBullet.className.replace(" active",""),elemBullet=PRIVATE.elements.pagination.querySelector(".page"+PRIVATE.nav.currentPage),elemBullet.className+=" active"},PRIVATE.setTranslate=function(e,x,y,z){x||(x=0),y||(y=0),z||(z=0),"internet explorer"!==pkg.context.browser.get("name").toLowerCase()||"8.0"!==pkg.context.browser.get("version")&&"9.0"!==pkg.context.browser.get("version")?(e.style["-webkit-transform"]="translate3d("+x+"px,"+y+"px,"+z+"px)",e.style["-moz-transform"]="translate3d("+x+"px,"+y+"px,"+z+"px)",e.style["-ms-transform"]="translate3d("+x+"px,"+y+"px,"+z+"px)",e.style["-o-transform"]="translate3d("+x+"px,"+y+"px,"+z+"px)",e.style.transform="translate3d("+x+"px,"+y+"px,"+z+"px)"):e.style.marginLeft=x+"px"},PRIVATE.getPageEvent=function(id){var i,page=0,events=PRIVATE.elements.gridPageable.querySelectorAll(".event"),eventsLength=events.length;for(i=0;eventsLength>i;i++)if(parseInt(events[i].htmlDataset("id"))===id){page=Math.ceil((i+1)/PRIVATE.nav.itemsView);break}return page},PRIVATE.loadChannelRealtime=function(channel){var latestRealtimeID=parseInt(PRIVATE.elements.wrapper.htmlDataset("realtimeId")),type="M";latestRealtimeID||(latestRealtimeID=0,type="O"),pkg.require(["mod.realtime"],function(ModRealtime){ModRealtime.setEnvironment("prd"),ModRealtime.addSubscriber({channel:channel,type:type,message:latestRealtimeID,insert:PRIVATE.callbackInsert})})},PRIVATE.callbackInsert=function(channelCode,realtimeId,data,realtime){var json;try{json=JSON.parse(data),json&&("update"===json.flag||"insert"===json.flag?(2===json.content.eventType&&(json.content.status=2),json.content.status===PRIVATE.eventStatus&&PRIVATE.insertEvent(json)):"remove"===json.flag&&PRIVATE.removeEvent(json))}catch(error){console.log("Parser check error.")}},PRIVATE.insertEvent=function(data){var event=data.content;if(1===event.videoHome&&event.videoHomeConfig.indexOf(pkg.context.page.get("idItemMenu"))>=0)return!1;if(PRIVATE.inArray(PRIVATE.acceptEventsType,event.eventType)){for(var i=0;i<PRIVATE.events.length;i++)if(PRIVATE.events[i].id===event.id)return PRIVATE.updateMatchEvent(PRIVATE.events[i],event),!0;PRIVATE.pageEventId!==event.id&&PRIVATE.createEvent(event)}},PRIVATE.updateMatchEvent=function(currentEvent,updateEvent){var team1,team2,hasGol=!1,elemTeam=null,elemAnimate=null,elemEvent=PRIVATE.elements.gridPageable.querySelector("#ticker-event-"+currentEvent.id);if(updateEvent.match.teams.team1.home?(team1=updateEvent.match.teams.team1,team2=updateEvent.match.teams.team2):(team1=updateEvent.match.teams.team2,team2=updateEvent.match.teams.team1),7===updateEvent.match.gameTime.id){for(var elements=elemEvent.querySelectorAll(".penlaty"),i=0;i<elements.length;i++)elements[i].className=elements[i].className.replace(" hide");currentEvent.match.teams.team1.score.penalty!=team1.score.penalty&&team1.score.penalty>0&&(hasGol=!0,currentEvent.match.teams.team1.score.penalty=team1.score.penalty,elemTeam=elements[0],elemTeam&&(elemTeam.innerHTML="("+currentEvent.match.teams.team1.score.penalty+")")),currentEvent.match.teams.team2.score.penalty!=team2.score.penalty&&team2.score.penalty>0&&(hasGol=!0,currentEvent.match.teams.team2.score.penalty=team2.score.penalty,elemTeam=elements[1],elemTeam&&(elemTeam.innerHTML="("+currentEvent.match.teams.team2.score.penalty+")"))}else currentEvent.match.teams.team1.score.points!=team1.score.points&&team1.score.points>0&&(hasGol=!0,currentEvent.match.teams.team1.score.points=team1.score.points,elemTeam=elemEvent.querySelector(".goal.team1"),elemTeam&&(elemTeam.innerHTML=currentEvent.match.teams.team1.score.points)),currentEvent.match.teams.team2.score.points!=team2.score.points&&team2.score.points>0&&(hasGol=!0,currentEvent.match.teams.team2.score.points=team2.score.points,elemTeam=elemEvent.querySelector(".goal.team2"),elemTeam&&(elemTeam.innerHTML=currentEvent.match.teams.team2.score.points));if(hasGol){elemAnimate=elemEvent.querySelector(".animation-goal");var page=PRIVATE.getPageEvent(currentEvent.id);page>0&&page!=PRIVATE.nav.currentPage&&(page>PRIVATE.nav.currentPage?(PRIVATE.nav.currentPage=page-1,PRIVATE.navNext()):(PRIVATE.nav.currentPage=page+1,PRIVATE.navPrevious())),elemAnimate&&("block"===elemAnimate.style.display?(elemAnimate.style.display="none",setTimeout(function(){elemAnimate.style.display="block"},300)):elemAnimate.style.display="block"),elemTeam&&(elemTeam.className=elemTeam.className.replace(" animation",""),setTimeout(function(){elemTeam.className+=" animation"},300)),"mob"===pkg.context.platform.get("type")&&navigator&&navigator.vibrate&&navigator.vibrate(500)}currentEvent.match.gameTime.id!=updateEvent.match.gameTime.id&&(currentEvent.match.gameTime.id=updateEvent.match.gameTime.id,elemTeam=elemEvent.querySelector(".status"),elemTeam&&(elemTeam.innerHTML=PUBLIC.l10n.get("gameTime"+currentEvent.match.gameTime.id)))},PRIVATE.inArray=function(array,val){for(var i=0,j=array.length;j>i;i++)if(array[i]===val)return!0;return!1},data&&data.feed&&"object"==typeof data.feed&&2===PRIVATE.eventStatus?PRIVATE.getActiveEvents(data.feed):PRIVATE.loadFeed(),PUBLIC},teardown:function(why,__static,__proto,__shared){}})});